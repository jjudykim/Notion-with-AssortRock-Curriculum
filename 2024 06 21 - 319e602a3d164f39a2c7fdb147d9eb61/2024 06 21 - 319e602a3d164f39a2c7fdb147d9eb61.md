# 2024/06/21 -

ìƒìœ„ í•­ëª©: Week30 (https://www.notion.so/Week30-4d14be1ecff547fa850e841a70655ecf?pvs=21)
ì£¼ì°¨: 0100_Week30~39

> 1êµì‹œ ë…¹ìŒë³¸
- [https://clovanote.naver.com/s/BBsphUScinyVNcZv6MoRkYS](https://clovanote.naver.com/s/BBsphUScinyVNcZv6MoRkYS)
> 

ê·¸ëŸ¼ ì´ë ‡ê²Œ ëœë‹¹?

### Inspectorì˜ ë‚´ìš©ì„ ì±„ì›Œë³´ì

í•œ ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ë‚´ìš©ì„ ë„ìš´ë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ, í‘œì‹œí•´ì¤„ ì •ë³´ë“¤ì„ ì •ë¦¬í•´ë³´ë©´

- Object Name
- Layer
- Component (Transform, Collider2D)

Inspector UIëŠ” ìì‹ ì´ ë„ì›Œì•¼ë  ì •ë³´ë¥¼ ê°–ê³ ìˆëŠ” í•´ë‹¹ GameObjectì— ëŒ€í•´ì„œ ì•Œ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤

â†’ ê³„ì¸µ êµ¬ì¡°ë¡œ êµ¬ì„±í•´ì„œ, ê°ê°ì˜ ë‹¨ë½ì„ ë‚˜ëˆŒ ìˆ˜ ìˆë„ë¡ ì‘ì„±

<aside>
ğŸ“ New Filter!
> EditorUI
    > 01. Inspector
        > Component

</aside>

ì´ê³³ì— Inspector UIë¥¼ êµ¬ì„±í•  ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ì •ë³´ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  ê²ƒì´ë‹¤

â†’ TransformUI / Collider2DUI

```cpp
class Inspector:
	public EditorUI
{
private:
	CGameObject*            m_TargetObejct;
	class ComponentUI*      m_arrComUI[(UINT)COMPONENT_TYPE::END];
	
public:
	void SetTargetObject(CGameObject* _Object)
	{
		m_TargetObject = _Object;
	}
	
}
```

```cpp
Inspector::Inspector()
	: m_TargetObejct(nullptr)
{
	 // Inspectorë¥¼ ìƒì„±í•˜ë©´ì„œ, ê°ê°ì˜ Component UIë“¤ì„ ìì‹ìœ¼ë¡œ ìƒì„±
	m_arrComUI[(UINT)COMPONENT_TYPE::TRANSFORM] = new TransformUI;
	m_arrComUI[(UINT)COMPONENT_TYPE::TRANSFORM]->SetName("TransformUI");
	AddChild(m_arrComUI[(UINT)COMPONENT_TYPE::TRANSFORM]);
	
	m_arrComUI[(UINT)COMPONENT_TYPE::TRANSFORM] = new Collider2DUI;
	m_arrComUI[(UINT)COMPONENT_TYPE::TRANSFORM]->SetName("Collider2DUI");
	AddChild(m_arrComUI[(UINT)COMPONENT_TYPE::COLLIDER2D]);
}

void Inspector::Update()
{
	if (m_TargetObject == nullptr)
	{
		SetTargetObject(CLevelMgr::GetInst()->FindObjectByName(L"Player"));
		return;
	}
	// 
	// ===========
	// Object Name
	// ===========
	// Wstringì„ stringìœ¼ë¡œ ë³€í™˜í•´ì„œ ë„£ì–´ì•¼ í•œë‹¤
	string strObjectName = string(m_TargetObejct->GetName().begin()
																, m_TargetObject->GetName().end());
	ImGui::Text("Object Name");             // ì¼ë°˜ í…ìŠ¤íŠ¸
	ImGui::SameLine(100);                   // ì¤„ë°”ê¿ˆ X ì²˜ë¦¬, ì¸ìëŠ” ê³ ì • ê°„ê²©
	ImGui::InputText("##Object Name", (char*)strObjectName.c_str(), strObjectName.length(), ImGuiInputTextFlags_ReadOnly);               // ì…ë ¥ í…ìŠ¤íŠ¸
	// ì¸ìëŠ” InputText í•­ëª©ì˜ í‚¤ ê°’, ë„ìš°ë ¤ëŠ” ë¬¸ìì—´ì˜ ì£¼ì†Œ(í¬ì¸í„°), ë²„í¼ í¬ê¸°, í”Œë˜ê·¸
	
	// ==========
	// Layer
	// ==========
	int LayerIdx = m_TargetObject->GetLayerIdx();
	CLevel* pCurLevel = CLevelMgr::GetInst()->GetCurrentLevel();
	CLayer* pLayer = pCurLevel->GetLayer(LayerIdx);
	string LayerName = string(pLayer->GetName().begin(), pLayer->GetName().end());
	
	char buffer[50] = {};
	if (LayerName.empty())
		sprintf_s(buffer, 50, "%d : %s", LayerIdx, "None");
	else
		sprintf_s(buffer, 50, "%d : %s", LayerIdx, LayerName.c_str());
	
	ImGui::Text("Layer");
	ImGui::SameLine(100);
	ImGui::InputText("##Layer", (char*)strObjectName.c_str(), strlen(buffer), ImGuiInputTextFlags_ReadOnly);
	
	// â­ ê³¼ì œ â­ Layer êµì²´í•˜ëŠ” ê¸°ëŠ¥ ì§ì ‘ êµ¬í˜„í•´ë³´ê¸°
	
	

	
	
	// ===========
  // Collider2D
  // ===========
}
```

- ê·¸ëŸ°ë° ì´ë•Œ, InputText í•¨ìˆ˜ëŠ” ë¬¸ìì—´ì„ ì¼ë°˜ í¬ì¸í„°ë¡œ ì „ë‹¬ ë°›ëŠ”ë°, ìš°ë¦¬ê°€ strObjectNameìœ¼ë¡œ Getí•´ì˜¨ ë¬¸ìì—´ì€ constê°€ ë¶™ì€ ì±„ë¡œ ì „ë‹¬ì´ ëœë‹¤ â†’ í˜¹ì—¬ë‚˜ í¬ì¸í„°ë¡œ ì ‘ê·¼í•´ ë¬¸ìì—´ì´ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´!
    
    â†’ ë”°ë¼ì„œ ImGuiInputTextì˜
    

### Component UI

ê°€ì¥ ë¨¼ì € ì¶”ìƒí´ë˜ìŠ¤ë¡œ ê³µí†µ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ, 

ê°ê°ì˜ Componentë“¤ì˜ UI ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, í¸ë¦¬í•˜ê²Œ ê³µí†µëœ ë¶€ë¶„ì„ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ í•˜ì

**ë¶€ëª¨ í´ë˜ìŠ¤ Component UI ì‘ì„±**

```cpp
ComponentUI::ComponentUI()
{
}

ComponentUI::~ComponentUI()
{
}
```

```cpp
class CTransformUI :
	public ComponentUI
{
private:
	
}
```

```cpp
CTransformUI::CTransformUI()
{
}

CTransformUI::~CTransformUI()
{
}

void CTransformUI::Update()
{
	if (m_TargetObject == nullptr)
		return;
		
	CTransform* pTrans = m_TargetObject->Transform();
	
	Vec3 vPos = pTrans->GetRelativePos();
	Vec3 vScale = pTrans->GetRelativeScale();
	Vec3 vRot = pTrans->GetRelativeRotation();
	
	ImGui::Text("Position");
	ImGui::SameLine(100);
	ImGui::InputFloat3("##Pos", vPos); 
	// -> ImGui::DragFloat3ì™€ ìœ ì‚¬ (ë“œë˜ê·¸ë¡œ í•´ë‹¹ Input ê°’ì„ ì¡°ì ˆ ê°€ëŠ¥)
	
	ImGui::Text("Scale");
	ImGui::SameLine(100);
	ImGui::InputFloat3("##Scale", vScale);
	
	ImGui::Text("Rotation");
	ImGui::SameLine(100);
	ImGui::DragFloat3("##Rot", vRot, 0.005f);    // Drag FloatëŠ” ê¸°ë³¸ ë‹¨ìœ„ ì„¤ì • ê°€ëŠ¥
	
	// InputFloat3ì—ì„œ ë³€ê²½í•œ ê°’ì„ ì ìš©í•˜ê¸° ìœ„í•´ set Pos
	pTrans->SetRelativePos(vPos);
	pTrans->SetRelativePos(vScale);
	pTrans->SetRelativePos(vRot);
}
```

```cpp
class Collider2DUI :
	public EditorUI
{
	class CGameObject* m_TargetObject;
	
	public:
}
```

- FindObjectByName : ì´ë¦„ì„ í†µí•´ Game Objectë¥¼ ì°¾ëŠ” í•¨ìˆ˜ë¥¼ ìƒˆë¡­ê²Œ ì •ì˜í•´ì£¼ì

<aside>
ğŸ“ ê³¼ì œ!

</aside>

```cpp
CGameObject* LevelMgr::FindObjectByName(const wstring& _Name)
{
	if (m_CurLevel)
	{
		m_CurLevel->FindObjectByName(_Name);
	}
}
```

```cpp
CGameObject* CLevel::FindObjectByName(const wstring& _Name)
{
	for(UINT i = 0; i < MAX_LAYER; ++i)
	{
		const vector<CGameObject*>& vecParent = m_Layer[i]->GetParentObjects();
		
		// ë ˆë²¨ ìˆœíšŒ í™œìš©í•´ ìì‹ ì˜¤ë¸Œì íŠ¸ì—ì„œ ëª¨ë‘ ì°¾ê¸°
		static list<CGameObject*> list;
		for(size_t i = 0; i < vecParent.size(); ++i)
		{
			list.clear();
			list.push_back();
			
			while(!list.empty())
			{
				CGameObject* pObject = list.front();
				list.pop_front();
				
				const vector<CGameObject*>& vecChild = pObject->GetChildren();
				for (size_t i = 0; i < vecChild.size(); ++i)
				{
					list.push_back(vecChild[i];
				}
				
				if (_Name == pObject->GetName())
				{
					return pObject;
				}
			}
		}
		
		return nullptr;
	}
	
	return nullptr;
}
```

### ì„ íƒì ìœ¼ë¡œ ê²½ê³„ì„ ì„ ì¶”ê°€í•˜ê¸°

EditorUIìª½ì—ì„œ ê²½ê³„ì„ ì„ í‚¤ê³ /ë„ëŠ” ì˜µì…˜ì„ ë§Œë“¤ì–´ì¤˜ì„œ,

í•´ë‹¹ ì˜µì…˜ì— ë”°ë¼ UIë“¤ì´ ìì‹ ì˜ ìì‹ UIë¥¼ ì¶œë ¥í•  ê²½ìš°ì— ê²½ê³„ì„ ì„ ê·¸ë¦¬ë„ë¡ í•˜ì

```cpp
if(m_Parent == nullptr)
{
	ImGui::Begin(m_FullName.c_str(), &m_Active);
	
	Update();
	
	for(size_t i = 0; i < m_vecChildUI.size(); ++i)
	{
		if (m_vecChildUI[i]->m_ChildBorder)
			ImGui::Separator();
		
		// ...
	}
}
```

ë§Œì•½ Componnet UIë“¤ì—ê²ŒëŠ” ëª¨ë‘ ì´ ê²½ê³„ì„  ì˜µì…˜ì„ ì¼œì¤€ë‹¤ë©´?

### ìì‹ì´ ë˜ëŠ” Editor UIë“¤ì—ê²Œ ì‚¬ì´ì¦ˆë¥¼ ë¶€ì—¬í•˜ê¸°

```cpp
ImVec2           m_ChildSize;
```

```cpp
else
{
	ImGui::(m_ChildSize);
}
```

ê·¸ëŸ¼ í˜„ì¬ ìƒí™©ì—ì„œ ëŒ€í‘œì ì¸ ìì‹ UIë“¤ì¸ Component UIë“¤ì„ ìƒì„±í•  ë•Œ Size ì—­ì‹œ ê°™ì´ ì„¤ì •í•´ì£¼ì

```cpp

```