# 2023/12/29 - í´ë˜ìŠ¤ í…œí”Œë¦¿ìœ¼ë¡œ List ì‘ì„±(2), push_frontì™€ iterator í™œìš©(1)

íƒœê·¸: C++, ìë£Œêµ¬ì¡°, ì¤‘ê¸‰, ì´ˆê¸‰
ë‚ ì§œ: 2023/12/29
ìƒìœ„ í•­ëª©: Week5 (Week5%200a092a69a72545ed811b51af82f1994a.md)
ì£¼ì°¨: 0001_Week1~9

### push_front êµ¬í˜„í•˜ê¸°

**push_frontì—ì„œ ìš”êµ¬ë˜ëŠ” ì¡°ê±´**

<aside>
â­ ë°ì´í„°ë¥¼ ì‚½ì…í–ˆì„ ë•Œ ê°€ì¥ ì²«ë²ˆì§¸ì˜ ì›ì†Œê°€ ë˜ë„ë¡ ì„¤ì •

</aside>

- ì´ë²ˆì— ì‚½ì…í•œ ë…¸ë“œê°€ ì²˜ìŒ ì‚½ì…ëœ ë…¸ë“œë¼ë©´?
    - HeadNodeê°€ í˜„ì¬ ë…¸ë“œê°€ ë˜ì–´ì•¼ í•œë‹¤
    - Tail ë…¸ë“œê°€ í˜„ì¬ ë…¸ë“œê°€ ë˜ì–´ì•¼ í•œë‹¤
- ì´ë¯¸ ì—¬ëŸ¬ ë…¸ë“œê°€ ì¡´ì¬í•˜ê³  ìˆëŠ” ì™€ì¤‘ì— í˜„ì¬ ë…¸ë“œê°€ ì‚½ì…ëœ ê²ƒì´ë¼ë©´?
    - HeadNodeê°€ í˜„ì¬ ë…¸ë“œê°€ ë˜ì–´ì•¼ í•œë‹¤
    - ê¸°ì¡´ì˜ HeadNodeê°€ ê°€ë¦¬í‚¤ë˜ Previous ë…¸ë“œê°€ í˜„ì¬ ë…¸ë“œê°€ ë˜ì–´ì•¼ í•œë‹¤
- í˜„ì¬ ë…¸ë“œì˜ ì¹´ìš´íŠ¸ê°€ 1 ì¦ê°€í•´ì•¼ í•œë‹¤

â†’ ì´ë¥¼ ì½”ë“œë¡œ êµ¬í˜„í•´ë³´ì!

```cpp
template<typename T>
inline void List<T>::push_front(const T& _Data)
{
	Node<T>* pNewNode = new Node<T>(_Data, m_pHead, nullptr);
	// ìƒˆë¡œìš´ Nodeë¥¼ ìƒì„±í•˜ë©° pNextì— m_pHeadê°€ ë“¤ì–´ê°„ ì´ìœ ëŠ”,
	// í˜„ì¬ ì‚½ì…ë˜ëŠ” ë…¸ë“œê°€ ì²«ë²ˆì§¸ ë…¸ë“œê°€ ë  ê²ƒì´ê¸° ë•Œë¬¸ì—
	// í˜„ì¬ pHeadì— ìˆëŠ” ë…¸ë“œê°€ ì‚½ì…ë˜ëŠ” ë…¸ë“œì˜ next ë…¸ë“œê°€ ë˜ê¸° ë•Œë¬¸ì´ë‹¤

	if (m_pHead != nullptr) { m_pHead->pPrev = pNewNode; }
	else { m_pTail = pNewNode; }

	m_pHead = pNewNode;
	++m_CurCount;
}
```

### iterator ìƒì„±í•˜ê¸°

Listì—ì„œ ê° ë…¸ë“œë“¤ì„ ê°€ë¦¬í‚¤ëŠ” `iterator`ë¥¼ ìƒì„±í•  ê²ƒì´ë‹¤

â†’ ***why?***

<aside>
ğŸ’¡ listëŠ” íŠ¹ì • indexì— ì ‘ê·¼í•˜ëŠ” í•¨ìˆ˜ ìì²´ê°€ êµ¬í˜„ë˜ì–´ ìˆì§€ ì•Šë‹¤
â†’ ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì—, ì ì ˆí•œ ìë£Œêµ¬ì¡°í˜•ì´ ì•„ë‹ˆë¼ì„œ
ë”°ë¼ì„œ íŠ¹ì • indexì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„  ë¬´ì¡°ê±´ ë°˜ë³µì iteratorë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤!

</aside>

```cpp
template <typename T>
class List
{
	// ...
public:
	class iterator;

	List()
	{
		// ...
	}

	~List()
	{
		// ...
	}

	void push_back(const T& _Data);
	void push_front(const T& _Data);

	class iterator
	{
	private:
		List<T>*	m_Owner;
		Node<T>*	m_TargetNode;

	public:
		iterator()
			: m_Owner(nullptr)
			, m_TargetNode(nullptr)
		{}

		iterator(List<T>* _Owner, Node<T>* _TargetNode)
			: m_Owner(_Owner)
			, m_TargetNode(_TargetNode)
		{
		}

		~iterator()
		{}
	}
}
```

**iteratorì˜ ë©¤ë²„**

- `List<T>*` : í•´ë‹¹ iteratorë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆ í¬ì¸í„°
- `Node<T>*` : iteratorë¥¼ í†µí•´ ì ‘ê·¼í•  Nodeì— ëŒ€í•œ í¬ì¸í„°
- ìƒì„±ì / ì†Œë©¸ì

### iteratorì˜ begin(), end() ì„¤ì •

ë¨¼ì € iteratorì˜ ì†ì‰¬ìš´ ì‚¬ìš©ì„ ìœ„í•œ begin(), end()ë¥¼ ë¨¼ì € ì„¤ì •í•´ ì¤„ ê²ƒì´ë‹¤

- `begin()` â†’ Listì˜ ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
- `end()` â†’ Listì˜ ë§ˆì§€ë§‰ ì›ì†Œ ë‹¤ìŒì„ ê°€ë¦¬í‚¤ëŠ” iteratorë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜

```cpp
iterator begin() { return iterator(this, m_pHead); }

iterator end() { return iterator(this, nullptr); }
// TailNodeì˜ pNextê°€ nullptrì¼ ê²½ìš° í•´ë‹¹ ë…¸ë“œê°€ ë§ˆì§€ë§‰ ë…¸ë“œì´ë‹ˆê¹Œ! 
// nullptrì„ end_iteratorì˜ Node*ë¡œ ì„¤ì •
```

### iteratorì˜ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

**ì—°ì‚°ì `*` ì˜¤ë²„ë¡œë”©**

â†’ ì½ê¸°/ì“°ê¸°ê°€ ëª¨ë‘ ê°€ëŠ¥í•˜ë„ë¡ ë°˜í™˜íƒ€ì…ì„ `&`(ì°¸ì¡°) íƒ€ì…ìœ¼ë¡œ í•´ì¤¬ë‹¤

```cpp
T& operator * ()
{
		// m_Ownerê°€ nullptrì¼ ê²½ìš° (í˜„ì¬ Listê°€ ì •ìƒì ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì§€ ì•Šì„ ê²½ìš°)
		// ë˜ëŠ”, m_TargetNodeê°€ nullptrì¼ ê²½ìš° (end iteratorì´ë¯€ë¡œ í•´ë‹¹ iteratorì— ì ‘ê·¼í•˜ë©´ ì—ëŸ¬ ë°œìƒ)
		assert(m_Owner && m_TargetNode);
		return m_TargetNode->Data;
}
```

<aside>
â­ í—·ê°ˆë ¸ë˜ assertì˜ ì‹¤í–‰ ì¡°ê±´ì— ëŒ€í•´ ì§šê³  ë„˜ì–´ê°€ë³´ì

assertëŠ” ë§¤ê°œë³€ìˆ˜ê°€ `null`, `false`, `0`ì´ ì „ë‹¬ë  ë•Œ ì—ëŸ¬ê°€ ê²€ì¶œë˜ëŠ” ì—ëŸ¬ê²€ì¶œìš© ì½”ë“œë‹¤!
ë”°ë¼ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì‹¤í–‰ ì¡°ê±´ì€ 
- m_Ownerê°€ nullptrì¼ ê²½ìš° â†’ m_Ownerì˜ ë°˜í™˜ê°’ì´ false
- m_TargetNodeê°€ nullptrì¼ ê²½ìš° â†’ m_TargetNodeì˜ ë°˜í™˜ê°’ì´ false ì˜ ORì´ë‹¤

ê·¸ëŸ°ë° assertëŠ” ***(ì¡°ê±´)ì´ falseì¼ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜***ì´ë¯€ë¡œ,
ì „ì²´ ì¡°ê±´ì„ ë¶€ì •ìœ¼ë¡œ í•œë²ˆ ê°ì‹¸ì¤˜ì•¼ í•œë‹¤! (ifë‘ ë°˜ëŒ€ë¡œ ìƒê°í•´ë³´ê¸°)
â†’ ì •ë¦¬í•´ë³´ë©´ `!(!m_Owner || !m_TargetNode)`

 ì´ë¥¼ ë“œëª¨ë¥´ê°„ì˜ ë²•ì¹™ì— ì˜í•´ ì •ë¦¬í•˜ë©´ `m_Owner && m_TargetNode` ì´ ë„ì¶œëœë‹¤

</aside>

**ì—°ì‚°ì `++` ì˜¤ë²„ë¡œë”© - ìˆ˜ì • ì˜ˆì •**

```cpp
void operator ++ ()
{
		// m_Ownerê°€ êµ¬ì„±ë˜ì§€ ì•Šì•˜ê±°ë‚˜, end iteratorì—ì„œ ++í•˜ëŠ” ê²½ìš°
		assert(m_Owner && m_TargetNode);

		m_TargetNode = m_TargetNode->pNext;
		// í˜„ì¬ ê°€ë¦¬í‚¤ëŠ” ë…¸ë“œì˜ pNextë…¸ë“œê°€ í˜„ì¬ ë…¸ë“œê°€ ë˜ë„ë¡ iterator ì´ë™
		// ë§Œì•½ í˜„ì¬ íƒ€ê²Ÿë…¸ë“œê°€ ë§ˆì§€ë§‰ ë…¸ë“œë¼ í•˜ë”ë¼ë„,
		// íƒ€ê²Ÿ ë…¸ë“œì˜ pNextê°€ nullptrì´ê¸° ë•Œë¬¸ì— 
		// í˜„ì¬ íƒ€ê²Ÿë…¸ë“œê°€ nullptê°€ ë˜ë©´ì„œ end iteratorë¡œ ì„¤ì •ë˜ë¯€ë¡œ
		// ë§ˆì§€ë§‰ ë…¸ë“œì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ X
}
```

**ì—°ì‚°ì `--` ì˜¤ë²„ë¡œë”© - ìˆ˜ì • ì˜ˆì •**

```cpp
void operator -- ()
{
	assert(m_Owner && m_TargetNode);

	// í˜„ì¬ ë…¸ë“œ(m_TargetNode)ê°€ m_pHeadê°€ ì•„ë‹ ê²½ìš°ì—ë§Œ ì½”ë“œê°€ ì‹¤í–‰ë˜ë„ë¡ ì—ëŸ¬ ê²€ì¶œ ì„¤ì •
	assert(m_Owner->m_pHead != m_TargetNode);

	m_TargetNode = m_TargetNode->pPrev;
	// í˜„ì¬ ê°€ë¦¬í‚¤ëŠ” ë…¸ë“œì˜ pPrevë…¸ë“œê°€ í˜„ì¬ ë…¸ë“œê°€ ë˜ë„ë¡ iterator ìœ„ì¹˜ ì´ë™
}
```

ì—°ì‚°ì `==`, `!=` ì˜¤ë²„ë¡œë”©

```cpp
bool operator == (const iterator& _otheriter)
{
	// ë‘ iteratorì˜ m_Ownerê°€ ê°™ì€ì§€, TargetNodeê°€ ê°™ì€ì§€ ë¹„êµ
	if (m_Owner == _otheriter.m_Owner && m_TargetNode == _otheriter.m_TargetNode)
		return true;
	else
		return false;
}

bool operator != (const iterator& _otheriter)
{
	return !( (*this) == _otheriter );
	// ì—¬ê¸°ì„œ *thisëŠ” ë‚˜ ìì‹  iterator ê°ì²´ ê·¸ ìì²´!
}
```

### â­ `erase()`ì˜ íŠ¹ì§•

eraseì˜ íŠ¹ì§•ì„ ì¢€ ë” ì‰½ê²Œ ì•Œê¸° ìœ„í•´, vector ì˜ˆì œë¥¼ ì‘ì„±í•´ì„œ ë“¤ì—¬ë‹¤ë³´ì

```cpp
#include <vector>

using std::vector;

int main()
{
	vector<int> vecInt;

	for(int i = 0; i < 100; ++i)
	{
		// 1~100ê¹Œì§€ ë°ì´í„° ì…ë ¥
		vecInt.push_back(i + 1);
	}

	vector<int>::iterator veciter = vecInt.begin();

	// ì˜ëª»ëœ ê²°ê³¼ ë„ì¶œ =======================================================
	for(; veciter != vecInt.end(); ++veciter)
	{
		if((*veciter) <= 50)
		{
			veciter = vecInt.erase(veciter);
		}
	}
	// =======================================================================
}
```

í˜„ì¬ ì›í•˜ëŠ” ê²°ê³¼ëŠ”, forë¬¸ì„ í†µí•´ iteratorë¡œ vectorì— ì ‘ê·¼í•˜ë©´ì„œ

veciterë¼ëŠ” iteratorë¡œ í•´ë‹¹ ìœ„ì¹˜ì˜ ì›ì†Œì— ì ‘ê·¼í•œ ê²°ê³¼(`(*veciter)`)ê°€ (ì¦‰, í•´ë‹¹ ìœ„ì¹˜ì˜ ë°ì´í„°ê°€) 50 ì´í•˜ì¼ ë•Œ, iteratorê°€ ê°€ë¦¬í‚¤ë˜ ì›ì†Œë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ë‹¤

ê·¸ëŸ°ë° `vecInt.erase(veciter)`ì˜ ê²°ê³¼ë§Œ ë†“ê³ ë³´ìë©´, ì´ ëª…ë ¹ì´ ì‹¤í–‰ëœ í›„ì— veciterê°€ ê°€ë¦¬í‚¤ëŠ” ê³µê°„ì€ ì´ë¯¸ ì‚­ì œëœ ê³µê°„ì´ë‹¤! ì¦‰, ê°€ë¦¬í‚¬ ëŒ€ìƒì´ ì—†ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ìƒíƒœê°€ ë˜ê³ , í˜¹ì—¬ë‚˜ í•´ë‹¹ iteratorë¥¼ í†µí•´ ì ‘ê·¼í•  ê²½ìš° ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤

<aside>
â­ ê·¸ë˜ì„œ `erase()`ë¼ëŠ” í•¨ìˆ˜ëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ **veciterê°€ ê°€ë¦¬í‚¤ë˜ ê³µê°„ì˜ ë‹¤ìŒ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” iteratorë¥¼ ìƒì„±í•´ ë°˜í™˜**í•˜ëŠ” íŠ¹ì§•ì„ ê°–ê³  ìˆë‹¤

</aside>

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë°˜ë³µë¬¸ ì•ˆì—ì„œ ë°˜ë³µì´ ì§„í–‰ë  ë•Œ ë§ˆë‹¤ `++veciter`ë¥¼ í•´ì¤€ë‹¤ë©´, eraseê°€ ë°˜í™˜í•œ ê²°ê³¼ê°€ ì´ë¯¸ ë‹¤ìŒ ë…¸ë“œë¥¼ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìƒíƒœì¸ë°ë„ veciterê°€ ì¦ê°€ë˜ì–´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²°ê³¼ê°’ì´ ì œëŒ€ë¡œ ë‚˜ì˜¤ì§€ ì•Šì„ ê²ƒì´ë‹¤

![Untitled](2023%2012%2029%20-%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B3%20%E1%84%90%E1%85%A6%E1%86%B7%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%BA%E1%84%8B%E1%85%B3%E1%84%85%E1%85%A9%20List%20%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%89%E1%85%A5%E1%86%BC(2),%20f2758c4188f64cabb64c88884a7372b6/Untitled.png)

â†’ ê·¸ë¦¼ì„ ë³´ë©´, í•œë²ˆ ë°˜ë³µì„ í•  ë•Œë§ˆë‹¤ iteratorê°€ ë‘ ì¹¸ì”© ì¦ê°€í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤

ë”°ë¼ì„œ ìš°ë¦¬ëŠ” í•´ë‹¹ ì‚¬í•­ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•œë‹¤!

**í•´ê²° ë°©ë²•**

```cpp
// ì •ìƒì ì¸ ê²°ê³¼ ë„ì¶œ =======================================================
	for(; veciter != vecInt.end(); )
	{
		if((*veciter) <= 50)
		{
			veciter = vecInt.erase(veciter);
		}
		else
		{
			++veciter;  // iteratorì˜ ì´ë™ì´ ì—†ì—ˆì„ ê²½ìš°ì—ë§Œ veciterê°€ ì¦ê°€í•˜ë„ë¡ ì„¤ì •
		}
	}
	// =======================================================================
```